#!/usr/bin/env ruby
#
# Usage: robot-master
#
require File.expand_path(File.dirname(__FILE__) + '/../config/boot')
require 'optparse'
require 'awesome_print'

class RobotMasterCLI
  def run(args)
    flags = {
      :encoding => 'UTF-8',
      :verbose => false,
      :debug => false
    }
    # args = %w{--help} if args.nil? or args.empty?
  
    OptionParser.new do |opts|
      opts.banner = "Usage: #{File.basename(__FILE__)} [-v]"
      opts.on('-v', '--verbose', 'Run verbosely, use multiple times for debug level output') do
        flags[:debug] = true if flags[:verbose]  # -vv
        flags[:verbose] = true
      end
    end.parse!(args)
  end
end

# __MAIN__
RobotMasterCLI.new.run(ARGV)

# completed, waiting, repository=nil, workflow=nil, with_priority
results = Dor::WorkflowService.get_objects_for_workstep(['start-assembly'], 'checksum-compute', 'dor', 'assemblyWF', true)
ap({:results => results})